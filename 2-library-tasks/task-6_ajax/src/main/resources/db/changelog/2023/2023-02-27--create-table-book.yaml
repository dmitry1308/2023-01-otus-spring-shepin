databaseChangeLog:
  - changeSet:
      id: 2023-02-26--createByParams-table-book
      author: shepin
      createTable:
        tableName: book
        columns:
          - column:
              name: id
              type: bigint
              autoIncrement: true
              constraints:
                nullable: false
                primaryKey: true
                primaryKeyName: pk_book
          - column:
              name: name
              type: varchar(50)
          - column:
              name: author_id
              type: bigint
              constraints:
                foreignKeyName: fk_author_book
                references: author(id)
          - column:
                name: genre_id
                type: bigint
                constraints:
                  foreignKeyName: fk_genre_book
                  references: genre(id)

  - changeSet:
      id: Create uniqueConstraint for author id and book name
      author: dshepin
      changes:
        - addUniqueConstraint:
            constraintName: book_name_author_id_unique
            columnNames: name, author_id
            tableName: book
      rollback:
        - dropUniqueConstraint:
            constraintName: book_name_author_id_unique
            tableName: book